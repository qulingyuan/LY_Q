### 类型转换

number 类型转换规则:

| 值            | 转换成number                                                 |
| ------------- | ------------------------------------------------------------ |
| undefined     | NaN                                                          |
| null          | 0                                                            |
| true 和 false | 1 和 0                                                       |
| string        | 去掉首尾空格后的纯数字字符串中含有的数字。如果剩余字符串为空，则转换结果为 `0`。否则，将会从剩余字符串中“读取”数字。当类型转换出现 error 时返回 `NaN`。 |

boolean 类型转换规则：

| 值                        | 转换成boolean |
| ------------------------- | ------------- |
| `0,undefined,null,NaN,''` | False         |
| 其他值                    | True          |

字符串之间进行比较，会按照其对应的 `unicode` 编码顺序逐字符比较大小。

不同类型的值进行比较时，js 会首先将其转化为数字再判定大小。

在非严格相等 `==` 下，`null` 和 `undefined` 相等且各自不等于任何其他的值。

### 加号运算符

JavaScript中对数字的运算符：`+、-、*、/、%、**`，最后一个是幂等。除`+`外，其他运算符只对数字起作用。

`+`作为二元运算符，且被应用于字符串时，它将连接各个字符串，只要任意一个运算元是字符串，那么另一个运算元也将被转化为字符串。

`+`作为一元运算符，对数字没有任何作用，但它可以将非数字转换为数字，效果与`Number(...)`相同。

饮食

### ||(或)

或运算符做了如下事情：

- 从左到右依次计算操作数。
- 处理每个操作数时，都将其转化为布尔值。如过结果是 `true` ，就停止计算，返回这个操作数的初始值。
- 如果所有的操作数都被计算过 (即转换结果都是 `false` )，则返回最后一个操作数。

换句话说，一个或运算 `||` 的链，将返回第一个真值，如果不存在真值，就返回该链的最后一个值。且返回的值是操作数的初始形式，不是转换成 `boolean` 的形式。

常见用法：

1. 获取变量列表或者表达式中的**第一个真值**。
2. 短路求值。

```javascript
console.log( null || 2 || 5 );   //输出 2
alert( alert(1) || 2 || alert(3) ); //首先是 1，然后是 2
```

### &&(与)

与运算 `&&` 做了如下的事：

- 从左到右依次计算操作数。
- 在处理每一个操作数时，都将其转化为布尔值。如果结果是  `false`，就停止计算，并返回这个操作数的初始值。
- 如果所有的操作数都被计算过（例如都是真值），则返回最后一个操作数。

换句话说，与运算返回第一个假值，如果没有假值就返回最后一个值。

```javascript
alert( 1 && null && 2 ); //显示 null
alert( alert(1) && alert(2) ); //首先是 1，然后 undefined
```

### !(非)

非运算做了如下的事：

1. 将操作数转化为布尔类型：`true/false`。
2. 返回相反的值。

使用两次非运算符可以将某个值转化为布尔类型，相当于 `Boolean` 函数。

```javascript
alert( !!"non-empty string" ); // true
alert( !!null ); // false
```

### ??(空值运算符)

`a ?? b`的结果是：

如果a既不是 `null` 也不是 `undefined` ,则结果为 `a` ，否则结果为 `b`。

和其他运算符使用时记得加括号。

```javascript
result = a ?? b;
//上面的代码相当于下面的代码
result = (a !== null && a !== undefined) ? a : b;
```

使用场景：

给未定义的变量提供一个默认值。`||`也有类似的功能，二者的区别是：

- `||` 返回第一个 **真** 值。
- `??` 返回第一个 **已定义的** 值。

这样来看，`??` 更准确，因为 `||` 会把 `0` 判断成 `false` ，但 `??` 作为新语法，兼容性需要注意。

### ?.(可选运算符)

如果可选链 `?.` 前面的值为 `undefined` 或者 `null`，它会停止运算并返回 `undefined`。

三种形式：

1. `obj?.prop` —— 如果 `obj` 存在则返回 `obj.prop`，否则返回 `undefined`。
2. `obj?.[prop]` —— 如果 `obj` 存在则返回 `obj[prop]`，否则返回 `undefined`。
3. `obj.method?.()` —— 如果 `obj.method` 存在则调用 `obj.method()`，否则返回 `undefined`。

```javascript
let user = {}; // user 没有 address 属性
alert( user.address?.street ); // undefined（不报错）
```

