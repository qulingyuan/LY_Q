皆さん、こんにちは、今日React  Virtual DOMを紹介します。

Web開発では、DOM操作(そうさ)によってパフォーマンスが低下(ていか)し、reactは仮想DOMを利用して、

DOM操作(そうさ)を削減(さくげん)します。

Reactにおける仮想(かそう)DOMとは、情報を受け取っても  すぐにはブラウザの描画(びょうが)を行(おこな)わず、まずはvirtual　DOM（プログラム的に作成された仮(かり)のDOM）を構築(こうちく)することを指(さ)します。そして、構築された仮想DOMの内容を元(げん)にHTMLを作成し、実際のDOM(リアルDOM)に同期(どうき)されます。このプロセスは差分検出処理(さぶんけんさくしょり) (reconciliation)と呼(よ)ばれます。

この仮想DOMはリアルDOMに比べ(くらべ)、ページ表示の高速(こうそく)化を実現します。

----

仮想DOMを利用することで、ページ変更前と変更後を仮想DOMを比較(ひかく)、情報が変化した部分だけを素早く(すばやく)見つけ出し、変更差分だけReal DOMに反映(はんえい)するので、変更が最小限(さいしょうげん)に抑え(おさえ)られるという仕組み(しくみ)です。

-----

通常、2つのツリーの差分(さぶん)を実行(じっこう)する場合、時間計算量(けいさんりょう)はO（n ^ 3）(Nの3じょうこん)です。
ただし、ReactはO（n）に近い(ちかい)です。
Reactがどのようにそれを行うかを見てみましょう。

まずは、層(そう)で比較(ひかく)です。

次は、ノードの順序(じゅんじょ)が交換(こうかん)されると、2つのノードの位置(いち)が直接(ちょくせつ)交換(こうかん)されます。

ノードの変更またはクロスレイヤー移動(いどう)の場合は、ノードを直接削除して再構築します。

この方法は2つの仮定(かてい)に基づ(もとづ)いています。

まず、コンポーネントのDOM構造(こうぞう)は比較的(ひかくてき)安定(あんてい)しています、実際は、ノードはめったに層を横切(よこぎ)って移動されていません。二番目は、同じタイプの兄弟(きょうだい)ノードは一意(いちい)に識別(しきべつ)できます。（開発の時、同じタイプのサブ要素にユニークキーを設定する必要があります)



diffメソッドの紹介はこちらです。例を見てみましょう！

画面には7つのボタンがあります，各(kaku)ボタンは、ツリーに対応します。

コードはこれです。各(kaku)ボタンは、ツリーに対応します。

1から2に変更します。

ノードCをノードAの下からノードDの下に移動します

Aの子(こ)ノードCを削除します，

Dの子ノードCを作成し、mountします。

ABRDは変更されていません。



AとBが交換されるため、ノードが削除または作成されることはありません



CとDを削除し、新しいCを作成する必要があります。CとDは大丈夫です、

しかし、Bは変更されていないため、削除すべきではありません。

なんでこれ？コードを見てみましょう

キーがセットしないため、BとDのどちらが変更されているかを判断できず、BとDの両方が削除されます。Bは再作成されました。



ご静聴ありがとうございます